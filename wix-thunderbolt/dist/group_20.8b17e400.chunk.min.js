"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[5433],{59062:(e,t,o)=>{o.r(t),o.d(t,{LightboxSymbol:()=>n.KK,LightboxUtilsSymbol:()=>n.By,name:()=>n.UU,page:()=>F,site:()=>B});var n=o(45117),i=o(32166),a=o(12482),r=o(16537),g=o(77748),p=o(20590),s=o(75396),u=o(32777),d=o(10553),l=o(87711),c=o(82658),h=o(98323),b=o(66084),m=o(84448),x=o(51360),P=o(79460);const L={},T=(0,g.Og)([b.SB,i.RV,(0,g.KT)(p.wk,n.UU),(0,g.KT)(p.YG,n.UU),(0,g.KT)(p._K,n.UU),b.re,m.W,s.t7,n.J9,h.j,n.Q9,n.Xd,u.F,P.q,d.n,l.eZ],({initPage:e},t,o,{prefixToRouterFetchData:n,pageIdToPrefix:i},a,g,p,s,u,d,l,{handleResponse:h},b,{getFetchParams:m},P,T)=>{const v=[],O=[];let U,y=null;const I=t?.document.querySelector("#site-root"),f=e=>{"Escape"===e.key&&K()},K=async()=>{const e=R();if(!e)return;const{pendingLightboxId:n}=o.get()||{},i=n&&n!==e,a=y,p=await g(e,e),s=await p.getAllImplementersOfAsync(r.$.PageWillUnmountHandler);if(await Promise.all(s.map(t=>t.pageWillUnmount({pageId:e,contextId:e}))),l.removeLightboxFromDynamicStructure(e),a?.(),O.forEach(e=>e?.()),i)return;d.disableCyclicTabbing(e),P["specs.thunderbolt.screen_reader_focus"]&&I?.removeAttribute("aria-hidden"),(0,c.fU)(t)||t.removeEventListener("keydown",f);const h=u.isDuringReopen()?R():void 0;o.update(e=>({...e,pageWillLoadHandler:null,currentLightboxId:h,pendingLightboxId:void 0,lightboxRouteData:void 0}))},R=()=>o.get()?o.get().currentLightboxId:void 0,C=async(a,r,g,O)=>{L[a]={lightboxViewerContext:g};const U=i[a],R=n[U];if(R){const{url:e,options:t}=m(x.U.Lightboxes,R,{lightboxId:a,dynamicPageIdOverride:O}),{pageId:o}=await h(b.envFetch(e,t));a=o??a}if((e=>{if(u.isDuringReopen())return!1;const t=o.get();return t?.currentLightboxId===e||t?.pendingLightboxId===e})(a))return void(y=y||r);o.update(e=>({...e,pendingLightboxId:a})),d.enableCyclicTabbing(a),P["specs.thunderbolt.screen_reader_focus"]&&I?.setAttribute("aria-hidden","true");const C=!s.isLandingOnProtectedPage();if(C&&(p.startNavigation(!0),p.setShouldBlockRender(!0)),await e({pageId:a,contextId:a,isLightbox:!0}),!T.get(a))return C&&p.setShouldBlockRender(!1),void(C&&p.endNavigation());y=r,v.length>0&&v.forEach(e=>{e&&e(a)}),(0,c.fU)(t)||t.addEventListener("keydown",f),C&&p.setShouldBlockRender(!1),await l.addLightboxToDynamicStructure(a),o.update(e=>({...e,pageWillLoadHandler:K,currentLightboxId:a})),C&&p.endNavigation()};return{isLightbox:e=>a.popupPages[e],open(e,t=null,n,i){const a=(o.get()?.pendingLightboxPromise||Promise.resolve()).then(()=>C(e,t,n,i));return o.update(e=>({...e,pendingLightboxPromise:a})),a},close:K,getContext:e=>L[e]?.lightboxViewerContext,registerToLightboxEvent(e,o){switch(e){case"popupScroll":U=o;const e=t.document.getElementById("POPUPS_ROOT"),n=e?.querySelector('div[class*="overflow-wrapper"]'),i=a.isResponsive&&n||e;i&&i.addEventListener("scroll",U);break;case"popupOpen":v.push(o);break;case"popupClose":O.push(o)}},getCurrentLightboxId:R,isOpen:()=>!!R()}}),v=(0,g.Og)([],()=>({isDuringReopen:()=>!1})),O=(0,g.Og)([(0,g.KT)(p.wk,"lightbox"),m.W,s.t7],(e,t,o)=>({name:"popupsPageNavigationHandler",appWillLoadPage:()=>{t.isFirstNavigation()&&!o.isLandingOnProtectedPage()&&e.update(e=>({...e,pendingLightboxPromise:t.waitForNavigationEnd()})),e.get()?.pageWillLoadHandler?.()}}));var U=o(85740),y=o(71085);const I=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],f=(e,t)=>{const o=((e,t)=>{if(t){const t=e.getAttribute("href");return(0,U.M$)(t||"")}return e.getAttribute("data-anchor")||""})(e,t);return I.includes(o)},K=(0,g.Og)([n.KK,y.$1,d.n,(0,g.KT)(p.YG,n.UU)],(e,t,o,{isBuilderComponentModel:i})=>({handlerId:n.UU,handleClick:o=>{const n=((e,t)=>{if(t){const t=e.getAttribute("href");return(0,U.d6)(t||"","popup")}return e.getAttribute("data-popupid")})(o,i);if(n)return e.open(n),!0;const a=t.getFullUrlWithoutQueryParams(),r=!!e.getCurrentLightboxId(),g=o.getAttribute("href"),p=g&&(0,U.b7)(g),s=(0,U.b5)(a)===(0,U.b5)(p||""),u=f(o,i),d="_blank"===o.getAttribute("target");return r&&(s||u)&&!d&&e.close(),!1}}));var R=o(66225);const C=(0,g.Og)([n.KK,R.T],(e,t)=>({componentTypes:["PopupCloseIconButton"],componentWillMount(o){t.register(o.id,"onClick",e.close)}})),S=(0,g.Og)([(0,g.KT)(p.Gp,n.UU),n.KK,R.T],({closeSiteButtons:e},t,o)=>({componentTypes:["SiteButton"],componentWillMount(n){e[n.id]&&o.register(n.id,"onClick",t.close)}})),w=(0,g.Og)([(0,g.KT)(p.Gp,n.UU),n.KK,R.T],({popupsWithCloseOnOverlayClick:e},t,o)=>({componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount(n){e[n.id]&&o.register(n.id,"onClick",t.close)}})),_=(0,g.Og)([(0,g.KT)(p._K,n.UU),(0,g.KT)(p.wk,n.UU)],(e,t)=>({isLightbox:t=>e.popupPages[t],getCurrentLightboxId:()=>t.get()?.pendingLightboxId||t.get()?.currentLightboxId,getLightboxPages:()=>e.popupPages,getLightboxRouteData:()=>t.get()?.lightboxRouteData})),D=(0,g.Og)([n.By,d.n],e=>({platformEnvData:()=>({popups:{popupPages:e.getLightboxPages(),lightboxRouteData:e.getLightboxRouteData()}})}));var k=o(20636);const W=(0,g.Og)([l.eZ,(0,g.KT)(p._K,n.UU),(0,g.KT)(p.AF,n.UU),l.Ji,s.hT],(e,t,o,n,i)=>({addLightboxToDynamicStructure:a=>{const r=e.getPageWrapperComponentId(a,a);return function({structureAPI:e,lightboxPageId:t,propsStore:o,pagesMap:n}){const i=e.getPopupContainerId(t),a=null!=i?o.get(i):null,r=a?.ariaLabel||a?.a11y?.ariaLabel||n.getPageById(t)?.title;o.update({POPUPS_ROOT:{ariaLabel:r}})}({structureAPI:e,lightboxPageId:a,propsStore:n,pagesMap:i}),o.export({lightboxPageId:a}),e.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[r],uiType:t.isResponsive?"Responsive":"Classic"},{[r]:{componentType:"PageMountUnmount",components:[a]}})},removeLightboxFromDynamicStructure:t=>{const n=e.getPageWrapperComponentId(t,t);e.removeComponentFromDynamicStructure(n),e.removeComponentFromDynamicStructure("POPUPS_ROOT"),o.export({lightboxPageId:void 0})}})),A=(0,g.Og)([(0,g.KT)(p.wk,n.UU)],e=>({handleResponse:async t=>t.then(async t=>{if(!t.ok)throw t;const{result:o}=await t.json(),{page:n,data:i,head:a,publicData:r}=o,g={publicData:r,pageHeadData:a,pageData:i};return e.update(e=>({...e,lightboxRouteData:g})),{pageId:n||null}}).catch(()=>({pageId:null}))})),B=e=>{e(n.J9).to(v),e(n.KK).to(T),e(i.ew).to(D),e(n.By).to(_),e(a.y7).to(K),e(r.$.AppWillLoadPageHandler).to(O),e(n.Q9).to(W),e(n.Xd).to(A)},F=e=>{e(k.ls).to(C),e(k.ls).to(S),e(k.ls).to(w)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_20.8b17e400.chunk.min.js.map
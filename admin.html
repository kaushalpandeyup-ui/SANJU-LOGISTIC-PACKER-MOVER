<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Admin - Sanju</title>
  <link rel="stylesheet" href="assets/theme.css">
  <style>body{font-family:Inter,system-ui,Arial;padding:20px} .note{border:1px solid #eee;padding:12px;margin:8px 0;border-radius:8px} .note.unread{background:#fff7e6;border-color:#ffd89b}</style>
  <script src="./scripts/localize-client.js" defer></script>
</head>
<body>
  <h1>Admin â€” Notifications</h1>
  <div id="notes">Loading...</div>
  <script>
    async function getJson(url){ const r = await fetch(url, { headers: { 'authorization': 'Bearer ' + (localStorage.getItem('sanju_token')||'') } }); if(!r.ok) throw new Error('HTTP '+r.status); return r.json(); }
    async function load(){ try{ const res = await getJson('/api/admin/notifications'); const notes = res.notifications || []; const el = document.getElementById('notes'); if(!notes.length) el.innerHTML = '<div class="muted">No notifications</div>'; else el.innerHTML = notes.map(n=>{
        const payload = typeof n.payload === 'object' ? JSON.stringify(n.payload, null, 2) : String(n.payload);
        return `<div class="note ${n.isRead ? '' : 'unread'}"><strong>${n.type.toUpperCase()}</strong> <small style="color:#666;margin-left:8px">${n.createdAt}</small><pre style="white-space:pre-wrap;margin:8px 0;padding:8px;background:#fafafa;border-radius:6px">${payload}</pre></div>`;
      }).join(''); }catch(e){ document.getElementById('notes').textContent = 'Failed to load: '+ (e && e.message || e); } }
    load();
  </script>
</body>
</html>